-- made by Muscle_legends2021 and reanimated by diggadoodog

local PsychoButton = Instance.new("TextButton")
PsychoButton.Name = "speider"
PsychoButton.Text = "SPIDER ANIMS"
PsychoButton.Size = UDim2.new(0, 200, 0, 50)
PsychoButton.Position = UDim2.new(0.5, -100, 0.5, -25)
PsychoButton.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
PsychoButton.TextColor3 = Color3.new(1, 1, 1)
PsychoButton.Font = Enum.Font.Arcade
PsychoButton.TextSize = 24
PsychoButton.BorderSizePixel = 2
PsychoButton.BorderColor3 = Color3.new(0, 0, 0)
PsychoButton.Draggable = true

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = PsychoButton

local UIStroke = Instance.new("UIStroke")
UIStroke.Thickness = 2
UIStroke.Color = Color3.new(0, 0, 0)
UIStroke.Parent = PsychoButton

local player = game.Players.LocalPlayer
local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")
PsychoButton.Parent = screenGui

local animation1 = Instance.new("Animation")
animation1.AnimationId = "rbxassetid://80532977539303"

local animationWalk = Instance.new("Animation")
animationWalk.AnimationId = "rbxassetid://89356423918695"

local animationJump = Instance.new("Animation")
animationJump.AnimationId = "rbxassetid://121730289076162"

local animationFall = Instance.new("Animation")
animationFall.AnimationId = "rbxassetid://121730289076162"

local newIdleAnimation = Instance.new("Animation")
newIdleAnimation.AnimationId = "rbxassetid://80532977539303"

local humanoid = player.Character:WaitForChild("Humanoid")
local idleTrack = humanoid:LoadAnimation(animation1)
local walkAnimTrack = humanoid:LoadAnimation(animationWalk)
local jumpTrack = humanoid:LoadAnimation(animationJump)
local fallTrack = humanoid:LoadAnimation(animationFall)
local newIdleTrack = humanoid:LoadAnimation(newIdleAnimation)

local psychoActive = false
local runningConnection
local jumpPlaying = false
local fallLoopConnection

local function playIdle()
	task.spawn(function()
		while psychoActive do
			if humanoid.MoveDirection.Magnitude == 0 and humanoid:GetState() ~= Enum.HumanoidStateType.Jumping and humanoid:GetState() ~= Enum.HumanoidStateType.Freefall then
				idleTrack:Play(0.1, 1, 1)
				task.wait(0.01)
			else
				task.wait(0.1)
			end
		end
	end)
end

local function stopIdle()
	idleTrack:Stop()
	newIdleTrack:Stop()
end

PsychoButton.MouseButton1Click:Connect(function()
	psychoActive = not psychoActive

	if psychoActive then
		PsychoButton.BackgroundColor3 = Color3.fromRGB(0, 100, 0)
		humanoid.WalkSpeed = 30
		humanoid.JumpPower = 70

		playIdle()

		if runningConnection then runningConnection:Disconnect() end
		runningConnection = humanoid:GetPropertyChangedSignal("MoveDirection"):Connect(function()
			if psychoActive and humanoid.MoveDirection.Magnitude > 0 and humanoid:GetState() ~= Enum.HumanoidStateType.Jumping and humanoid:GetState() ~= Enum.HumanoidStateType.Freefall then
				stopIdle()
				if not walkAnimTrack.IsPlaying then
					walkAnimTrack:Play()
				end
			else
				walkAnimTrack:Stop()
			end
		end)

		humanoid.StateChanged:Connect(function(_, newState)
			if newState == Enum.HumanoidStateType.Jumping then
				if not jumpPlaying then
					stopIdle()
					walkAnimTrack:Stop()
					jumpPlaying = true
					jumpTrack:Play()
					jumpTrack.Stopped:Wait()
					jumpPlaying = false
				end
			elseif newState == Enum.HumanoidStateType.Freefall then
				stopIdle()
				jumpTrack:Stop()

				if fallLoopConnection then
					fallLoopConnection:Disconnect()
					fallLoopConnection = nil
				end
wait(0.3)
				fallTrack:Play()

				-- Keep replaying fall animation until landed
				fallLoopConnection = fallTrack.Stopped:Connect(function()
					if humanoid:GetState() == Enum.HumanoidStateType.Freefall then
						fallTrack:Play()
					end
				end)

			elseif newState == Enum.HumanoidStateType.Landed then
				if fallLoopConnection then
					fallLoopConnection:Disconnect()
					fallLoopConnection = nil
				end
				fallTrack:Stop()
				playIdle()
			end
		end)
	else
		PsychoButton.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
		humanoid.WalkSpeed = 16
		humanoid.JumpPower = 50
		stopIdle()
		walkAnimTrack:Stop()
		jumpTrack:Stop()
		fallTrack:Stop()
		if runningConnection then runningConnection:Disconnect() end
		if fallLoopConnection then fallLoopConnection:Disconnect() end
	end
end)

game.Players.LocalPlayer.CharacterAdded:Connect(function(character)
	humanoid = character:WaitForChild("Humanoid")
	idleTrack = humanoid:LoadAnimation(animation1)
	walkAnimTrack = humanoid:LoadAnimation(animationWalk)
	jumpTrack = humanoid:LoadAnimation(animationJump)
	fallTrack = humanoid:LoadAnimation(animationFall)
	newIdleTrack = humanoid:LoadAnimation(newIdleAnimation)
end)
